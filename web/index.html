<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>LegacyCodeBench — Benchmark for AI Code Understanding</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="A benchmark for evaluating how well AI systems understand and document legacy COBOL code. 200 tasks, execution-based testing, ground-truth scoring.">

  <link rel="stylesheet" href="assets/styles.css">
  <script src="assets/leaderboard.js" defer></script>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-inner">
      <a href="index.html" class="logo">
        LegacyCodeBench
        <span class="version-badge">v2.0</span>
      </a>
      <nav>
        <a href="#leaderboard" class="active">Leaderboard</a>
        <a href="#methodology">Methodology</a>
        <a href="#get-started">Get Started</a>
        <a href="https://github.com/Kalmantic/legacycodebench" target="_blank" rel="noopener">GitHub</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Page Header -->
    <div class="page-header">
      <h1 class="page-title">Can AI understand legacy code?</h1>
      <p class="page-description">
        LegacyCodeBench evaluates how well AI systems understand and document legacy COBOL.
        We test whether documentation is accurate enough to regenerate working code—not just whether it looks plausible.
      </p>
    </div>

    <!-- Stats -->
    <div class="stats-bar">
      <div class="stat">
        <div class="stat-value" id="total-models">-</div>
        <div class="stat-label">Models Tested</div>
      </div>
      <div class="stat">
        <div class="stat-value">200</div>
        <div class="stat-label">Tasks</div>
      </div>
      <div class="stat">
        <div class="stat-value">4</div>
        <div class="stat-label">Difficulty Tiers</div>
      </div>
    </div>

    <!-- Leaderboard -->
    <section id="leaderboard">
      <div class="section-header">
        <h2 class="section-title">Leaderboard</h2>
        <span class="leaderboard-info" id="leaderboard-updated"></span>
      </div>

      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Model</th>
              <th class="center">LCB Score<span class="th-sub">0-100</span></th>
              <th class="num">SC<span class="th-sub">Structural</span></th>
              <th class="num">BF<span class="th-sub">Behavioral</span></th>
              <th class="num">SQ<span class="th-sub">Semantic</span></th>
              <th class="num">TR<span class="th-sub">Traceability</span></th>
              <th class="num">T1<span class="th-sub">Basic</span></th>
              <th class="num">T4<span class="th-sub">Enterprise</span></th>
            </tr>
          </thead>
          <tbody id="leaderboard-body">
            <tr>
              <td colspan="9" style="text-align: center; padding: 2rem; color: var(--text-light);">
                Loading results...
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="callout">
        <strong>Scoring:</strong> LCB Score = 35% Behavioral Fidelity + 30% Structural Completeness + 25% Semantic Quality + 10% Traceability.
        High BF means code generated from the AI's documentation produces correct outputs.
      </div>
    </section>

    <!-- Methodology -->
    <section id="methodology">
      <div class="section-header">
        <h2 class="section-title">What We Measure</h2>
      </div>

      <p class="page-description" style="margin-bottom: 24px;">
        If AI truly understands code, you should be able to recreate it from the documentation. That's what we test.
      </p>

      <div class="methodology">
        <div class="method-card">
          <h4>Behavioral Fidelity <span class="method-weight">35%</span></h4>
          <p>Code generated from the AI's documentation is compiled and executed. Outputs must match the original COBOL program exactly.</p>
        </div>

        <div class="method-card">
          <h4>Structural Completeness <span class="method-weight">30%</span></h4>
          <p>Static analysis extracts all variables, control flow paths, and dependencies. We check if the AI documented each one.</p>
        </div>

        <div class="method-card">
          <h4>Semantic Quality <span class="method-weight">25%</span></h4>
          <p>A calibrated LLM evaluates whether a developer could understand the code without reading the original.</p>
        </div>

        <div class="method-card">
          <h4>Traceability <span class="method-weight">10%</span></h4>
          <p>Line references and code citations must point to real code elements. Fabricated references are penalized.</p>
        </div>
      </div>

      <div class="formula">LCB Score = (0.35 × BF) + (0.30 × SC) + (0.25 × SQ) + (0.10 × TR)</div>

      <div class="callout" style="margin-top: 24px;">
        Critical failures (hallucinated functions, incorrect business rules) result in a score of 0 for that task.
      </div>
    </section>

    <!-- Get Started -->
    <section id="get-started">
      <div class="section-header">
        <h2 class="section-title">Run the Benchmark</h2>
      </div>

      <div class="formula" style="font-size: 13px; line-height: 1.8;">
# Install
pip install -e .

# Set API keys
export OPENAI_API_KEY="sk-..."
export ANTHROPIC_API_KEY="sk-ant-..."

# Run
legacycodebench interactive</div>

      <div class="callout" style="margin-top: 24px;">
        For Behavioral Fidelity testing, build the Docker image:
        <br><br>
        <code style="font-size: 12px;">cd docker/cobol-sandbox && docker build -t legacycodebench-cobol:latest .</code>
        <br><br>
        Without Docker, BF scores will be 0.
      </div>

      <div class="callout" style="margin-top: 16px;">
        Submit results: Run the benchmark and open a PR on
        <a href="https://github.com/Kalmantic/legacycodebench" target="_blank" rel="noopener">GitHub</a>
        with your <code>results/</code> directory.
      </div>
    </section>

  </main>

  <footer>
    <div class="footer-inner">
      <span>LegacyCodeBench · Kalmantic AI Labs + Hexaview Tech</span>
      <div class="footer-links">
        <a href="https://github.com/Kalmantic/legacycodebench" target="_blank" rel="noopener">GitHub</a>
        <a href="#">Paper</a>
        <a href="mailto:nikita@kalmantic.com">Contact</a>
      </div>
    </div>
  </footer>
</body>
</html>
